#!/bin/bash

# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
LOG_FILE=".claude/ftp-hook.log"

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã‚‚è¡¨ç¤º
echo "ðŸ”” FTP Hook: Triggered at $(date)"

# FTPè¨­å®š
FTP_HOST="sv16506.xserver.jp"
FTP_USER="icotfeels"
FTP_PASS="ege69emy"
REMOTE_DIR="/readnest.jp/public_html"

# å®Ÿè¡Œã•ã‚ŒãŸã“ã¨ã‚’è¨˜éŒ²
echo "========================================" >> "$LOG_FILE"
echo "[$(date)] Hook triggered!" >> "$LOG_FILE"
echo "Tool: $1" >> "$LOG_FILE"
echo "Arguments: $@" >> "$LOG_FILE"
echo "PWD: $(pwd)" >> "$LOG_FILE"
echo "USER: $(whoami)" >> "$LOG_FILE"

# å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŽ¢ã™
echo "Searching for recent files..." >> "$LOG_FILE"
FILES_FOUND=$(find . -type f \( -name "*.php" -o -name "*.html" -o -name "*.css" -o -name "*.js" \) -mmin -1 2>/dev/null)

if [ -z "$FILES_FOUND" ]; then
    echo "No recent files found" >> "$LOG_FILE"
else
    echo "$FILES_FOUND" | while read file; do
        if [[ ! "$file" =~ \.tmp\. ]]; then
            echo "Found file: $file" >> "$LOG_FILE"
            relative_path="${file#./}"
            
            # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ
            echo "ðŸ“¤ Uploading: $relative_path"
            curl -T "$file" \
